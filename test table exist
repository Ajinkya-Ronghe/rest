CREATE OR REPLACE FUNCTION esh_main.table_exists(table_name TEXT)
RETURNS BOOLEAN AS $$
DECLARE
    table_found BOOLEAN;
BEGIN
    -- Check if the table exists
    PERFORM to_regclass(table_name);
    table_found := FOUND;

    -- Return the result
    RETURN table_found;
END;
$$ LANGUAGE plpgsql;





DO $$
DECLARE
    table_name TEXT := 'esh_main.some_table_name';
    exists BOOLEAN;
BEGIN
    exists := esh_main.table_exists(table_name);
    IF exists THEN
        RAISE NOTICE 'Table % exists.', table_name;
    ELSE
        RAISE NOTICE 'Table % does not exist.', table_name;
    END IF;
END;
$$ LANGUAGE plpgsql;
